{"ast":null,"code":"var _jsxFileName = \"/Users/nehajadhavsarnaik/Documents/NEHA WORK/MASTERS SUBJECTS /COMPUTER SCIENCE/CS601/Project/neha2/src/components/messages/MessageInput.js\";\nimport React, { Component } from 'react';\nimport { MdSend } from 'react-icons/md';\nimport { MdAttachFile } from 'react-icons/md';\n\nconst axios = require(\"axios\"); // import ImageUploader from 'react-images-upload';\n\n\nconst SITE_URL = \"http://localhost:3001\";\nexport default class MessageInput extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n\n      if (this.state.message === \"\") {\n        this.uploadFile();\n      } else {\n        this.sendMessage();\n      }\n\n      this.setState({\n        message: \"\",\n        buttonDisabled: true,\n        isTyping: false,\n        file: null\n      });\n    };\n\n    this.uploadFile = () => {\n      const formData = new FormData();\n      formData.append('myFile', this.state.file);\n      const config = {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      axios.post(SITE_URL + \"/upload\", formData, config).then(response => {\n        console.log(response);\n\n        if (response.data && response.data.length > 0) {\n          console.log('lll');\n          this.props.sendUploadmsg(response);\n        }\n      }).catch(error => {\n        alert('Error : ' + error);\n      });\n    };\n\n    this.sendMessage = () => {\n      this.props.sendMessage(this.state.message);\n      this.stopCheckingTyping();\n    };\n\n    this.sendTyping = () => {\n      this.lastUpdateTime = Date.now();\n\n      if (!this.state.isTyping) {\n        this.setState({\n          isTyping: true\n        });\n        this.props.sendTyping(true);\n        this.startCheckingTyping();\n      }\n    };\n\n    this.startCheckingTyping = () => {\n      console.log(\"Typing\");\n      this.typingInterval = setInterval(() => {\n        if (Date.now() - this.lastUpdateTime > 600) {\n          this.setState({\n            isTyping: false\n          });\n          this.stopCheckingTyping();\n        }\n      }, 600);\n    };\n\n    this.stopCheckingTyping = () => {\n      console.log(\"Stop Typing\");\n\n      if (this.typingInterval) {\n        clearInterval(this.typingInterval);\n        this.props.sendTyping(false);\n      }\n    };\n\n    this.onfileChange = e => {\n      this.setState({\n        file: e.target.files[0],\n        message: \"\",\n        buttonDisabled: false\n      });\n    };\n\n    this.state = {\n      message: \"\",\n      buttonDisabled: true,\n      isTyping: false,\n      file: null\n    };\n  }\n\n  componentWillUnmount() {\n    this.stopCheckingTyping();\n  }\n\n  render() {\n    const {\n      message,\n      buttonDisabled,\n      file\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"message-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"uploadimgvid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MdAttachFile, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"uploadimgvid\",\n      type: \"file\",\n      onChange: this.onfileChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      disabled: file != null,\n      id: \"message\",\n      ref: \"messageinput\",\n      type: \"text\",\n      className: \"form-control\",\n      value: message,\n      autoComplete: 'off',\n      placeholder: \"Type something interesting\",\n      onKeyUp: e => {\n        e.keyCode !== 13 && this.sendTyping();\n      },\n      onClick: event => event.target.value = null,\n      onChange: ({\n        target\n      }) => {\n        this.setState({\n          message: target.value,\n          buttonDisabled: false,\n          file: null\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 6\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      disabled: buttonDisabled,\n      type: \"submit\",\n      className: \"send\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 6\n      }\n    }, \" \", /*#__PURE__*/React.createElement(MdSend, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 8\n      }\n    }), \" \")));\n  }\n\n}","map":{"version":3,"sources":["/Users/nehajadhavsarnaik/Documents/NEHA WORK/MASTERS SUBJECTS /COMPUTER SCIENCE/CS601/Project/neha2/src/components/messages/MessageInput.js"],"names":["React","Component","MdSend","MdAttachFile","axios","require","SITE_URL","MessageInput","constructor","props","handleSubmit","e","preventDefault","state","message","uploadFile","sendMessage","setState","buttonDisabled","isTyping","file","formData","FormData","append","config","headers","post","then","response","console","log","data","length","sendUploadmsg","catch","error","alert","stopCheckingTyping","sendTyping","lastUpdateTime","Date","now","startCheckingTyping","typingInterval","setInterval","clearInterval","onfileChange","target","files","componentWillUnmount","render","keyCode","event","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {MdSend} from 'react-icons/md';\r\nimport {MdAttachFile} from 'react-icons/md';\r\nconst axios = require(\"axios\");\r\n// import ImageUploader from 'react-images-upload';\r\nconst SITE_URL = \"http://localhost:3001\"\r\nexport default class MessageInput extends Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tmessage:\"\",\r\n\t\t\tbuttonDisabled:true,\r\n\t\t\tisTyping:false,\r\n\t\t\tfile: null\r\n\t\t};\r\n\r\n\t}\r\n\t\r\n\thandleSubmit = (e)=>{\r\n\t\te.preventDefault()\r\n\t\t\r\n\t\tif(this.state.message===\"\"){\r\n\t\t\tthis.uploadFile();\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.sendMessage()\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tmessage:\"\",\r\n\t\t\tbuttonDisabled:true,\r\n\t\t\tisTyping:false,\r\n\t\t\tfile: null\r\n\t\t})\r\n\t}\r\n\r\n\tuploadFile=()=>{\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append('myFile',this.state.file);\r\n\t\tconst config = {\r\n            headers: {\r\n                'content-type': 'multipart/form-data'\r\n            }\r\n\t\t};\r\n\t\t\r\n\t\taxios.post(SITE_URL+\"/upload\",formData,config)\r\n            .then((response) => {\r\n\t\t\t\tconsole.log(response)\r\n\t\t\t\tif(response.data && response.data.length>0){\r\n\t\t\t\t\tconsole.log('lll')\r\n\t\t\t\t\tthis.props.sendUploadmsg(response);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n            }).catch((error) => {\r\n\t\t\t\talert('Error : '+error)\r\n        });\r\n\t}\r\n\r\n\tsendMessage = ()=>{\r\n\t\tthis.props.sendMessage(this.state.message)\r\n\t\tthis.stopCheckingTyping()\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t  this.stopCheckingTyping()\r\n\t}\r\n\r\n\tsendTyping = ()=>{\r\n\t\tthis.lastUpdateTime = Date.now()\r\n\t\tif(!this.state.isTyping){\r\n\t\t\tthis.setState({isTyping:true})\r\n\t\t\tthis.props.sendTyping(true)\r\n\t\t\tthis.startCheckingTyping()\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\tstartCheckingTyping = ()=>{\r\n\t\tconsole.log(\"Typing\");\r\n\t\tthis.typingInterval = setInterval(()=>{\r\n\t\t\tif((Date.now() - this.lastUpdateTime) > 600){\r\n\t\t\t\tthis.setState({isTyping:false})\r\n\t\t\t\tthis.stopCheckingTyping()\r\n\t\t\t}\r\n\t\t}, 600)\r\n\t}\r\n\t\r\n\t\r\n\tstopCheckingTyping = ()=>{\r\n\t\tconsole.log(\"Stop Typing\");\r\n\t\tif(this.typingInterval){\r\n\t\t\tclearInterval(this.typingInterval)\r\n\t\t\tthis.props.sendTyping(false)\r\n\t\t}\r\n\t}\r\n\r\n\tonfileChange=(e) =>{\r\n\t\tthis.setState({file:e.target.files[0],message:\"\",buttonDisabled:false});\r\n\t\t\r\n    }\r\n\r\n\r\n\trender() {\r\n\t\tconst { message,buttonDisabled,file } = this.state\r\n\t\treturn (\r\n\t\t\t<div className=\"message-input\">\r\n\t\t\t\t<form \r\n\t\t\t\t\tonSubmit={ this.handleSubmit }\r\n\t\t\t\t\tclassName=\"message-form\">\r\n\t\t\t\t\t{/* <ImageUploader\r\n\t\t\t\t\t\twithIcon={true}\r\n\t\t\t\t\t\tbuttonText='Choose images'\r\n\t\t\t\t\t\tonChange={this.onDrop}\r\n\t\t\t\t\t\tmaxFileSize={5242880}\r\n\t\t\t\t\t/> */}\r\n\t\t\t\t\t<div className=\"uploadimgvid\">\r\n\t\t\t\t\t\t<span><MdAttachFile/></span>\r\n\t\t\t\t\t\t<input  id=\"uploadimgvid\"  type=\"file\"\r\n\t\t\t\t\t\t\tonChange= {this.onfileChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\tdisabled={file!=null}\r\n\t\t\t\t\t\tid = \"message\"\r\n\t\t\t\t\t\tref = {\"messageinput\"}\r\n\t\t\t\t\t\ttype = \"text\"\r\n\t\t\t\t\t\tclassName = \"form-control\"\r\n\t\t\t\t\t\tvalue = { message }\r\n\t\t\t\t\t\tautoComplete = {'off'}\r\n\t\t\t\t\t\tplaceholder = \"Type something interesting\"\r\n\t\t\t\t\t\tonKeyUp = { e => { e.keyCode !== 13 && this.sendTyping() } }\r\n\t\t\t\t\t\tonClick={event => event.target.value = null}\r\n\t\t\t\t\t\tonChange = {\r\n\t\t\t\t\t\t\t({target})=>{\r\n\t\t\t\t\t\t\t\tthis.setState({message:target.value,buttonDisabled:false,file:null})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tdisabled = {buttonDisabled}\r\n\t\t\t\t\t\ttype = \"submit\"\r\n\t\t\t\t\t\tclassName = \"send\"\r\n\r\n\t\t\t\t\t> <MdSend/> </button>\r\n\t\t\t\t</form>\r\n\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n"]},"metadata":{},"sourceType":"module"}